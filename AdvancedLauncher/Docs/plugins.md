# Plugin system overview
## SDK Library
The common shared SDK library is [AdvancedLauncherSDK](https://github.com/GoldRenard/DMOAdvancedLauncher/tree/master/AdvancedLauncherSDK). It includes all service interfaces, some common abstract implementations of these interfaces and common model classes/entities. Online documentation of SDK is available [here](http://goldrenard.github.io/DMOAdvancedLauncher/sdkdocs/) (generated by doxygen).

##### Namespaces
- [AdvancedLauncher.SDK.Management](http://goldrenard.github.io/DMOAdvancedLauncher/sdkdocs/namespace_advanced_launcher_1_1_s_d_k_1_1_management.html) - contains common interfaces of public services
- [AdvancedLauncher.SDK.Model](http://goldrenard.github.io/DMOAdvancedLauncher/sdkdocs/namespace_advanced_launcher_1_1_s_d_k_1_1_model.html) - contains common model classes/entities used for communication with the application
- [AdvancedLauncher.SDK.UI](http://goldrenard.github.io/DMOAdvancedLauncher/sdkdocs/namespace_advanced_launcher_1_1_s_d_k_1_1_u_i.html) - contains UI controls for windows and pages

##### Initialization pipeline
Every application start runs `PluginManager` internal service that goes through the following steps:
1. Scans `%APPLICATION_ROOT%/Plugins` folder for plugin dlls
2. Scans each loaded dll for types with implemented [IPlugin](http://goldrenard.github.io/DMOAdvancedLauncher/sdkdocs/interface_advanced_launcher_1_1_s_d_k_1_1_management_1_1_plugins_1_1_i_plugin.html) interface.
3. Initializes each type that was found:
   1. Validates Strong-Name of plugin assembly
   2. Grants CAS permissions to plugin based on result of Strong-Name validation:
      * **Full Trust** permission set in case that it have **valid** Strong-Name with exactly the same PublicKey token of launcher's Strong-Name.
      * **Partial Trust** in other cases. The full set of permissions is listed on the following section
   3. Creates new AppDomain for this plugin with granted permissions
   4. Instantiates the plugin in this AppDomain
   5. Calls the `void OnActivate(IPluginHost PluginHost)` plugins method that should do its work (menu item registration, event listeners, etc).
      * Do not forget to implement `void OnStop(IPluginHost PluginHost)` method that clears resources associated with plugin (removes menu items, unregisters event listeners, etc).
      * Manual plugin stop/start actions are implemented as `plugin` console command. UI will be implemented in future releases.