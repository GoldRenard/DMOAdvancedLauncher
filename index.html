<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
	<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
	<script src="http://js.maxmind.com/js/apis/geoip2/v2.0/geoip2.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <script>
		var redirect = (function () {
			/* This implements the actual redirection. */
			var redirectBrowser = function (site) {
				window.location = site;
			};

			
			var defaultSite = "index-en.html";

			var onSuccess = function (geoipResponse) {
				
				/* There's no guarantee that a successful response object
				 * has any particular property, so we need to code defensively. */
				if (!geoipResponse.country.iso_code) {
					redirectBrowser(defaultSite);
					return;
				}

				/* ISO country codes are in upper case. */
				var code = geoipResponse.country.iso_code.toLowerCase();

				alert(code);
				
				if ( code == "ru" ) {
					redirectBrowser("index-ru.html");
				}
				else {
					redirectBrowser(defaultSite);
				}
			};

			/* We don't really care what the error is, we'll send them
			 * to the default site. */
			var onError = function (error) {
				alert("Error");
				redirectBrowser(defaultSite);
			};

			return function () {
				geoip2.country( onSuccess, onError );
			};
		}());

		redirect();
    </script>
	
    <title>DMO Advanced Launcher</title>
  </head>

  <body>
  </body>
</html>